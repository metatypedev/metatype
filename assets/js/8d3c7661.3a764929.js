(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2945],{17942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>m,kt:()=>h});var i=n(50959);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),d=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=d(n),p=a,h=u["".concat(s,".").concat(p)]||u[p]||c[p]||r;return n?i.createElement(h,l(l({ref:t},m),{},{components:n})):i.createElement(h,l({ref:t},m))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:a,l[1]=o;for(var d=2;d<r;d++)l[d]=n[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},43726:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var i=n(50959);function a(e){let{name:t,choices:n,choice:a,onChange:r,className:l}=e;return i.createElement("ul",{className:`pl-0 m-0 list-none w-full ${l??""}`},Object.entries(n).map((e=>{let[n,l]=e;return i.createElement("li",{key:n,className:"inline-block rounded-md overflow-clip mr-1"},i.createElement("div",null,i.createElement("label",{className:"cursor-pointer"},i.createElement("input",{type:"radio",name:t,value:n,checked:n===a,onChange:()=>r(n),className:"hidden peer"}),i.createElement("div",{className:"px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white"},l))))})))}},66360:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(50959),a=n(55362),r=n(90430),l=n(85551),o=n(90116),s=n(14623);const d=e=>{e.getWrapperElement().closest(".graphiql-editor").style.height=`${e.doc.height}px`};function m(e){const{queryEditor:t,variableEditor:n,headerEditor:a}=(0,s._i)({nonNull:!0}),[r,l]=(0,i.useState)(e.defaultTab),o=(0,s.Xd)({onCopyQuery:e.onCopyQuery}),m=(0,s.fE)();return(0,i.useEffect)((()=>{n&&d(n)}),[r,n]),(0,i.useEffect)((()=>{a&&d(a)}),[r,a]),(0,i.useEffect)((()=>{t&&(t.setOption("lineNumbers",!1),t.setOption("extraKeys",{"Alt-G":()=>{t.replaceSelection("@")}}),t.setOption("gutters",[]),t.on("change",d),d(t))}),[t]),(0,i.useEffect)((()=>{n&&(n.setOption("lineNumbers",!1),n.setOption("gutters",[]),n.on("change",d))}),[n]),(0,i.useEffect)((()=>{a&&(a.setOption("lineNumbers",!1),a.setOption("gutters",[]),a.on("change",d))}),[a]),i.createElement(s.u.Provider,null,i.createElement("div",{className:"graphiql-editors"},i.createElement("section",{className:"graphiql-query-editor shadow-sm","aria-label":"Query Editor"},i.createElement("div",{className:"graphiql-query-editor-wrapper"},i.createElement(s.WK,{editorTheme:e.editorTheme,keyMap:e.keyMap,onCopyQuery:e.onCopyQuery,onEdit:e.onEditQuery,readOnly:e.readOnly}),i.createElement("div",{className:"graphiql-toolbar",role:"toolbar","aria-label":"Editor Commands"},i.createElement(s._8,null),i.createElement(s.wC,{onClick:()=>m(),label:"Prettify query (Shift-Ctrl-P)"},i.createElement(s.Kt,{className:"graphiql-toolbar-icon","aria-hidden":"true"})),i.createElement(s.wC,{onClick:()=>o(),label:"Copy query (Shift-Ctrl-C)"},i.createElement(s.TI,{className:"graphiql-toolbar-icon","aria-hidden":"true"}))))),e.noTool?null:i.createElement(i.Fragment,null,i.createElement("div",{className:"graphiql-editor-tools p-0 text-sm "},i.createElement("div",{className:"graphiql-editor-tools-tabs"},i.createElement("div",{className:("variables"===r?"text-slate-800":"")+" p-2 hover:text-slate-800 cursor-pointer",onClick:()=>{l("variables"===r?"":"variables")}},"Variables"),i.createElement("div",{className:("headers"===r?"text-slate-800":"")+" p-2 hover:text-slate-800 cursor-pointer",onClick:()=>{l("headers"===r?"":"headers")}},"Headers"))),i.createElement("section",{className:"graphiql-editor-tool "+(r&&r.length>0?"pt-0":"hidden p-0"),"aria-label":"variables"===r?"Variables":"Headers"},i.createElement(s.hF,{editorTheme:e.editorTheme,isHidden:"variables"!==r,keyMap:e.keyMap,onEdit:e.onEditVariables,readOnly:e.readOnly}),i.createElement(s.LA,{editorTheme:e.editorTheme,isHidden:"headers"!==r,keyMap:e.keyMap,onEdit:e.onEditHeaders,readOnly:e.readOnly})))))}class u{constructor(){this.map=new Map,this.length=0}getItem(e){return this.map.get(e)}setItem(e,t){this.map.has(e)||(this.length+=1),this.map.set(e,t)}removeItem(e){this.map.has(e)&&(this.length-=1),this.map.delete(e)}clear(){this.length=0,this.map.clear()}}var c=n(43726);function p(){return(0,s.JB)({nonNull:!0}).isFetching?i.createElement(s.$j,null):null}const h={typegraph:"Typegraph",playground:"Playground"};function g(e){let{typegraph:t,query:n,code:r,codeLanguage:d,codeFileUrl:g,headers:f={},variables:y={},tab:v="",noTool:k=!1,defaultMode:b=null}=e;const{siteConfig:{customFields:{tgUrl:N}}}=(0,l.Z)(),E=(0,i.useMemo)((()=>new u),[]),w=(0,i.useMemo)((()=>(0,a.nq)({url:`${N}/${t}`})),[]),[S,x]=(0,i.useState)(b);return i.createElement("div",{className:"@container miniql mb-5"},b?i.createElement(c.r,{name:"mode",choices:h,choice:S,onChange:x,className:"mb-2"}):null,i.createElement(s.j$,{fetcher:w,defaultQuery:n.loc?.source.body.trim(),defaultHeaders:JSON.stringify(f),shouldPersistHeaders:!0,variables:JSON.stringify(y),storage:E},i.createElement("div",{className:(b?"":"md:grid @2xl:grid-cols-2")+" gap-2 w-full order-first"},b&&"typegraph"!==S?null:i.createElement("div",{className:" bg-slate-100 rounded-lg flex flex-col mb-2 md:mb-0"},g?i.createElement("div",{className:"p-2 text-xs font-light"},"See/edit full code on"," ",i.createElement("a",{href:`https://github.com/metatypedev/metatype/blob/main/${g}`},g)):null,r?i.createElement(o.Z,{language:d,wrap:!0,className:"flex-1"},r):null),b&&"playground"!==S?null:i.createElement("div",{className:"flex flex-col graphiql-container"},i.createElement("div",{className:"flex-1 graphiql-session"},i.createElement(m,{defaultTab:v,noTool:k})),i.createElement("div",{className:"flex-auto graphiql-response min-h-[200px] p-2 mt-2 bg-slate-100 rounded-lg"},i.createElement(p,null),i.createElement(s.iB,null))))))}function f(e){return i.createElement(r.Z,{fallback:i.createElement("div",null,"Loading...")},(()=>i.createElement(g,e)))}},31645:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(28957),a=n(66360),r=n(50959);function l(e){let{python:t,...n}=e;return r.createElement(a.Z,(0,i.Z)({code:t.content,codeLanguage:"python",codeFileUrl:t.path},n))}},6231:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>u});var i=n(28957),a=(n(50959),n(17942)),r=n(31645),l=n(90116);const o={sidebar_position:3},s="Adding more runtimes",d={unversionedId:"tutorials/adding-more-runtimes/index",id:"tutorials/adding-more-runtimes/index",title:"Adding more runtimes",description:"Getting random data is great, but having some input variables and meaningful output is even better. The random runtime is usually used to quickly draft and iterate on an API prototype. Once the interface feels efficient and well-designed, it's time to move another runtime backed by some storage.",source:"@site/docs/tutorials/adding-more-runtimes/index.mdx",sourceDirName:"tutorials/adding-more-runtimes",slug:"/tutorials/adding-more-runtimes/",permalink:"/docs/tutorials/adding-more-runtimes/",draft:!1,editUrl:"https://github.com/metatypedev/metatype/tree/main/website/docs/tutorials/adding-more-runtimes/index.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docs",previous:{title:"Your first typegraph",permalink:"/docs/tutorials/your-first-typegraph/"},next:{title:"Import your existing APIs",permalink:"/docs/tutorials/import-your-existing-apis/"}},m={},u=[{value:"Prisma runtime",id:"prisma-runtime",level:2},{value:"GraphQL runtime",id:"graphql-runtime",level:2}],c={toc:u},p="wrapper";function h(e){let{components:t,...o}=e;return(0,a.kt)(p,(0,i.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"adding-more-runtimes"},"Adding more runtimes"),(0,a.kt)("p",null,"Getting random data is great, but having some input variables and meaningful output is even better. The random runtime is usually used to quickly draft and iterate on an API prototype. Once the interface feels efficient and well-designed, it's time to move another runtime backed by some storage."),(0,a.kt)("admonition",{title:"Please share your feedback",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},'You can raise issues, suggest improvements, ask questions and share your feedback using comments below \u2193, using private messages with the "Help, Feedback & Roadmap" button on the right \u2192 or directly using the ',(0,a.kt)("a",{parentName:"p",href:"https://github.com/metatypedev/metatype/discussions"},"GitHub discussions"),".")),(0,a.kt)("h2",{id:"prisma-runtime"},"Prisma runtime"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.prisma.io/"},"Prisma"),' is a "Next-generation Node.js and Typescript ORM" supporting PostgreSQL, MySQL/MariaDB, SQLite, MongoDB, CockroachDB and Microsoft SQL Server. It is one of the main runtimes provided by Metatype and doesn\'t require any additional installation.'),(0,a.kt)("p",null,"Go ahead and update ",(0,a.kt)("inlineCode",{parentName:"p"},"typegraph.py")," with the highlighted lines below:"),(0,a.kt)(r.Z,{typegraph:"database",python:n(61805),query:n(21527),mdxType:"TGExample"}),(0,a.kt)("p",null,"A few things to note on the changes:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"You can import runtimes from ",(0,a.kt)("inlineCode",{parentName:"li"},"typegraph.runtime.Y")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"typegraph.providers.X.runtimes.Y")," for non-core providers."),(0,a.kt)("li",{parentName:"ol"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"config")," method allows specifying runtime specific attributes. In this case, ",(0,a.kt)("inlineCode",{parentName:"li"},"id")," shall be automatically set and incremented by the database."),(0,a.kt)("li",{parentName:"ol"},"Types get generated names unless you manually specify them. You can find the exact names in the playground documentation. Here you want to have a human friendly name as it will also be the name of the table in your database."),(0,a.kt)("li",{parentName:"ol"},"Runtimes often come with some sugar syntax to generate types and avoid manipulating materializers directly. A corresponding declaration would have looked like this:")),(0,a.kt)(l.Z,{language:"python",mdxType:"CodeBlock"},n(50154).content),(0,a.kt)("p",null,"In order to use the Prisma runtime, you need to add a new environment variable. Runtimes don't take raw secrets, but instead a secret key used to look up environment variables named under the format ",(0,a.kt)("inlineCode",{parentName:"p"},"TG_[typegraph name]_[key]"),". You can either add it in your ",(0,a.kt)("inlineCode",{parentName:"p"},"metatype.yml")," (recommended) or in your ",(0,a.kt)("inlineCode",{parentName:"p"},"compose.yml"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ cat metatype.yml\ntypegates:\n  dev:\n    # ..\n    env:\n# highlight-next-line\n      TG_DATABASE_POSTGRES_CONN: postgresql://postgres:password@postgres:5432/db\n\n$ meta dev\n")),(0,a.kt)("p",null,"And now, you can iteratively continue to improve your interface, running migrations and having data stored inside your database."),(0,a.kt)("h2",{id:"graphql-runtime"},"GraphQL runtime"),(0,a.kt)("p",null,"You currently have a single model to describe messages sent in the chat-based app. A reasonable next step is to add a user model and make a link between the two. While you can store users in the same database, it's wiser to avoid data duplication and re-use your service for user management available at ",(0,a.kt)("a",{parentName:"p",href:"https://graphqlzero.almansi.me"},"GraphQLZero")," endpoint. Let's introduce the GraphQL runtime that allows remote GraphQL queries."),(0,a.kt)("p",null,"Update ",(0,a.kt)("inlineCode",{parentName:"p"},"typegraph.py")," with the highlighted lines below:"),(0,a.kt)(r.Z,{typegraph:"graphql",python:n(73015),query:n(4864),mdxType:"TGExample"}),(0,a.kt)("p",null,"Again, a few interesting happened here:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"No migration has been run. The field ",(0,a.kt)("inlineCode",{parentName:"li"},"user")," comes from another runtime and doesn't exist in the database. The typegate will orchestrate the query execution in all runtimes and minimize the work done."),(0,a.kt)("li",{parentName:"ol"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"from_parent")," rule automatically fills the input type with the parent field named ",(0,a.kt)("inlineCode",{parentName:"li"},"uid"),". The ",(0,a.kt)("inlineCode",{parentName:"li"},"g(\xb7)")," rule allows making named reference to another type and avoid circular reference.")),(0,a.kt)("p",null,"Other type enforcement rules also exists:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"from_secret(key)")," to fill the input type with the secret in the ",(0,a.kt)("inlineCode",{parentName:"li"},"TG_[typegraph name]_[key]")," format"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"from_context(\xb7)")," to fill the input type with content from the request context, such as JSON Web Token (JWT), etc."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"set(x)")," to fill the input type with content ",(0,a.kt)("inlineCode",{parentName:"li"},"x"))),(0,a.kt)("p",null,"You should now start to see the power provided by Metatype and might wonder how to integrate it step by step with your existing systems. Writing all those types by hand is tedious and error-prone. The next section will show you how to generate types from existing sources."))}h.isMDXComponent=!0},21527:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"A"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"create_message"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"title"},value:{kind:"StringValue",value:"Hello World",block:!1}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"StringValue",value:"This is a message",block:!1}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"B"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"list_messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"title"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"equals"},value:{kind:"StringValue",value:"Hello World",block:!1}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:251}};t.loc.source={body:'mutation A {\n  create_message(\n    data: {\n      # id is autogenerated\n      title: "Hello World"\n      body: "This is a message"\n    }\n  ) {\n    id\n  }\n}\n\nquery B {\n  list_messages(where: { title: { equals: "Hello World" } }) {\n    id\n    body\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,l=new Set,o=new Set;for(r.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){l.has(e)||(l.add(e),(i[e]||new Set).forEach((function(e){o.add(e)})))}))}return l.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.A=r(t,"A"),e.exports.B=r(t,"B")},4864:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"A"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"B"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"create_message"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"title"},value:{kind:"StringValue",value:"Hey",block:!1}},{kind:"ObjectField",name:{kind:"Name",value:"user_id"},value:{kind:"StringValue",value:"1",block:!1}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"C"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"take"},value:{kind:"IntValue",value:"2"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:224}};t.loc.source={body:'query A {\n  users {\n    data {\n      id\n      name\n    }\n  }\n}\n\nmutation B {\n  create_message(data: { title: "Hey", user_id: "1" }) {\n    id\n  }\n}\n\nquery C {\n  messages(take: 2) {\n    title\n    user {\n      name\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,l=new Set,o=new Set;for(r.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){l.has(e)||(l.add(e),(i[e]||new Set).forEach((function(e){o.add(e)})))}))}return l.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.A=r(t,"A"),e.exports.B=r(t,"B"),e.exports.C=r(t,"C")},61805:e=>{e.exports={content:'# highlight-next-line\nfrom typegraph.providers.prisma import PrismaRuntime\n\n\n@typegraph(\n    allow_origin=[\n      "https://metatype.dev",\n      "http://localhost:3000",\n    ],\n  ),\n)\ndef database(g: Graph):\n  db = PrismaRuntime("database", "POSTGRES_CONN")\n  public = Policy.public()\n\n  message = t.struct(\n    {\n      # highlight-next-line\n      "id": t.integer(as_id=True, config=["auto"]),\n      "title": t.string(),\n      "body": t.string(),\n    },\n    # highlight-next-line\n    name="message",\n  )\n\n  g.expose(\n    public,\n    # highlight-next-line\n    create_message=db.create(message),\n    list_messages=db.find_many(message),\n  )',path:"website/docs/tutorials/adding-more-runtimes/database.py"}},73015:e=>{e.exports={content:'# highlight-next-line\nfrom typegraph.runtimes.graphql import GraphQLRuntime\n\n\n@typegraph(\n    allow_origin=[\n      "https://metatype.dev",\n      "http://localhost:3000",\n    ],\n  ),\n)\ndef graphql(g: Graph):\n  db = PrismaRuntime("database", "POSTGRES_CONN")\n  # highlight-next-line\n  gql = GraphQLRuntime("https://graphqlzero.almansi.me/api")\n  public = Policy.public()\n\n  # highlight-next-line\n  user = t.struct({"id": t.string(), "name": t.string()})\n\n  message = t.struct(\n    {\n      "id": t.integer(as_id=True, config=["auto"]),\n      "title": t.string(),\n      # highlight-next-line\n      "user_id": t.string(name="uid"),\n      # highlight-next-line\n      "user": gql.query(\n        t.struct(\n          {\n            # highlight-next-line\n            "id": t.string(as_id=True).from_parent("uid")\n          }\n        ),\n        t.optional(user),\n      ),\n    },\n    name="message",\n  )\n\n  g.expose(\n    public,\n    create_message=db.create(message),\n    messages=db.find_many(message),\n    # highlight-next-line\n    users=gql.query(\n      t.struct({}), t.struct({"data": t.list(user)})\n    ),\n  )',path:"website/docs/tutorials/adding-more-runtimes/graphql.py"}},50154:e=>{e.exports={content:"",path:"website/docs/tutorials/adding-more-runtimes/prisma-no-sugar.py"}}}]);