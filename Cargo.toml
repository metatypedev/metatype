[workspace]
resolver = "2"
members = [
  "libs/*",
  "libs/metagen/src/mdk_rust/static",
  "typegate/engine",
  "typegate/standalone",
  "meta-cli",
  "typegraph/core", 
]

exclude = [
  "typegate/tests/runtimes/wasm_reflected/rust",
  "typegate/tests/runtimes/wasm_wire/rust",
  "libs/pyrt_wit_wire",
]
[workspace.package] 
version = "0.4.3-0"
edition = "2021"

[workspace.dependencies]
# deno = { path =  "../deno/cli"}
deno = { git = "https://github.com/metatypedev/deno", branch = "v1.43.6-embeddable" }
deno_core = { version = "=0.280.0" }

# internal crates
mt_deno = { path = "libs/deno/" }
common = { path = "libs/common/" }
metagen = { path = "libs/metagen/" }
typegate_engine = { path = "typegate/engine" }

# cli
clap = "=4.4.17"
clap_complete = "=4.4.7"

# http
reqwest = "0.11"

shadow-rs = "0.24"

# encoding
serde = { version = "1", features = ["derive"] }
serde_json = "1"
flate2 = "1"
tar = "0.4"
base64 = "0.22"

# patterns
anyhow = "1"
color-eyre = "0.6"
thiserror = "1"
indoc = "2"
itertools = "0.13"

# os
tempfile = "3.8.1"

# data structures
regex = "1"
once_cell = "1"
indexmap = { version = "2.1", features = ["serde"] }

# wasm
wasmtime = "21.0.0"
wasmtime-wasi = "21.0.0"

# logging
# pinned to match version brought in
# https://github.com/metatypedev/deno/blob/librarify-cli/cli/Cargo.toml#L51
env_logger = "=0.10.0"
log = "0.4"
tracing = "0.1"
# tracing core helper
tracing-subscriber = { version = "0.3", features = ["env-filter", "parking_lot", "tracing-log"] }
# backtrace for async frames
tracing-error = "0.2"
# `unwrap` that also logs
tracing-unwrap = { version = "1.0", features = ["log-location"] }
# collect traces to file
tracing-appender = "0.2"

# async
futures = "0.3"
futures-concurrency = "7.6"
futures-lite = "2.3"
tokio = { version = "1.34", features = ["parking_lot"] }
async-trait = "0.1"
