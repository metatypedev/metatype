<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-blog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Blog | Metatype</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://metatype.dev/blog"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | Metatype"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://metatype.dev/blog"><link data-rh="true" rel="alternate" href="https://metatype.dev/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://metatype.dev/blog" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://metatype.dev/blog","mainEntityOfPage":"https://metatype.dev/blog","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://metatype.dev/blog/2024/08/27/distributed-execution-flow-paradigms","mainEntityOfPage":"https://metatype.dev/blog/2024/08/27/distributed-execution-flow-paradigms","url":"https://metatype.dev/blog/2024/08/27/distributed-execution-flow-paradigms","headline":"Distributed execution flow paradigms","name":"Distributed execution flow paradigms","description":"In this age of cloud development and microservices architecture, problems start to arise with the increased workloads that run in the system. Imagine an e-commerce platform where a customer places an order for a product during a high-demand sale event. The order triggers a series of interconnected processes: payment processing, inventory checks, packaging, shipping, and final delivery. Each of these processes might be handled by different microservices, potentially running on different servers or even in different data centers. What happens if the payment service goes down right after the payment is authorized but before the inventory is updated? Or if the packaging service fails just after the inventory is deducted but before the item is packed? Without a robust mechanism to ensure that each step in the workflow completes successfully and that failures are properly handled, you could end up with unhappy customers, lost orders, and inventory discrepancies.","datePublished":"2024-08-27T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://metatype.dev/blog/2024/08/26/python-on-webassembly","mainEntityOfPage":"https://metatype.dev/blog/2024/08/26/python-on-webassembly","url":"https://metatype.dev/blog/2024/08/26/python-on-webassembly","headline":"Python on WebAssembly: How?","name":"Python on WebAssembly: How?","description":"Metatype's different language runtimes are nice, but integrating one is an entire story. Let's discover how we managed to implement one for Python.","datePublished":"2024-08-26T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://metatype.dev/blog/2024/05/09/programmatic-deployment","mainEntityOfPage":"https://metatype.dev/blog/2024/05/09/programmatic-deployment","url":"https://metatype.dev/blog/2024/05/09/programmatic-deployment","headline":"Programmatic deployment (v0.4.x)","name":"Programmatic deployment (v0.4.x)","description":"A new approach to deploying typegraphs has been introduced starting with version 0.4.0. This aims to facilitate the development of automation tools around the APIs you build within the Metatype ecosystem.","datePublished":"2024-05-09T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://metatype.dev/blog/2023/11/27/node-compatibility","mainEntityOfPage":"https://metatype.dev/blog/2023/11/27/node-compatibility","url":"https://metatype.dev/blog/2023/11/27/node-compatibility","headline":"The Node/Deno SDK is now available","name":"The Node/Deno SDK is now available","description":"We are happy to announce that we have redesigned our SDKs to support Node/Deno and facilitate the integration of future languages. Most of the typegraph SDK is now written in Rust and shaped around a core interface running in WebAssembly.","datePublished":"2023-11-27T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://metatype.dev/blog/2023/06/18/programmable-glue","mainEntityOfPage":"https://metatype.dev/blog/2023/06/18/programmable-glue","url":"https://metatype.dev/blog/2023/06/18/programmable-glue","headline":"Programmable glue for developers","name":"Programmable glue for developers","description":"We are introducing Metatype, a new project that allows developers to build modular and strongly typed APIs using typegraph as a programmable glue.","datePublished":"2023-06-18T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://metatype.dev/blog/2023/03/15/emulating-servers","mainEntityOfPage":"https://metatype.dev/blog/2023/03/15/emulating-servers","url":"https://metatype.dev/blog/2023/03/15/emulating-servers","headline":"Emulating your server nodes locally","name":"Emulating your server nodes locally","description":"Introducing the Embedded Typegate","datePublished":"2023-03-15T00:00:00.000Z","author":[],"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Metatype RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Metatype Atom Feed">






<link rel="preconnect" href="https://eu.posthog.com">
<script>!function(t,e){var o,p,i,n;e.__SV||(window.posthog=e,e._i=[],e.init=function(r,s,c){function a(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(i=t.createElement("script")).type="text/javascript",i.async=!0,i.src=s.api_host+"/static/array.js",(n=t.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n);var u=e;for(void 0!==c?u=e[c]=[]:c="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==c&&(e+="."+c),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset".split(" "),p=0;p<o.length;p++)a(u,o[p]);e._i.push([r,s,c])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_xeoqjAATkOtdpBmixBDIbLp6wCDSo87kAjdKCILQc8U",{api_host:"https://eu.posthog.com",persistence:"memory",id:"default"})</script>



<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&amp;display=swap"><link rel="stylesheet" href="/assets/css/styles.1dcfc16d.css">
<script src="/assets/js/runtime~main.cb59b3d6.js" defer="defer"></script>
<script src="/assets/js/main.4b8c6419.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_kkJt" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="Metatype Logo" class="themedComponent_Ev3p themedComponent--light_IPMc"><img src="/images/logo.svg" alt="Metatype Logo" class="themedComponent_Ev3p themedComponent--dark_olOz"></div><b class="navbar__title text--truncate">Metatype</b></a><a class="navbar__item navbar__link" href="/use-cases/automatic-crud-validation">Use cases</a><a class="navbar__item navbar__link" href="/docs/concepts/features-overview">Features</a><a class="navbar__item navbar__link" href="/docs">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/metatypedev/metatype" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><a href="https://communityinviter.com/apps/metatypedev/invite" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link"></a><div class="navbarSearchContainer_YXBI"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Ge4w"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_lQgi thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_mx0m margin-bottom--md">Recent posts</div><ul class="sidebarItemList_r_qu clean-list"><li class="sidebarItem_bvrZ"><a class="sidebarItemLink_DrpT" href="/blog/2024/08/27/distributed-execution-flow-paradigms">Distributed execution flow paradigms</a></li><li class="sidebarItem_bvrZ"><a class="sidebarItemLink_DrpT" href="/blog/2024/08/26/python-on-webassembly">Python on WebAssembly: How?</a></li><li class="sidebarItem_bvrZ"><a class="sidebarItemLink_DrpT" href="/blog/2024/05/09/programmatic-deployment">Programmatic deployment (v0.4.x)</a></li><li class="sidebarItem_bvrZ"><a class="sidebarItemLink_DrpT" href="/blog/2023/11/27/node-compatibility">The Node/Deno SDK is now available</a></li><li class="sidebarItem_bvrZ"><a class="sidebarItemLink_DrpT" href="/blog/2023/06/18/programmable-glue">Programmable glue for developers</a></li></ul></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_vgDZ"><a href="/blog/2024/08/27/distributed-execution-flow-paradigms">Distributed execution flow paradigms</a></h2><div class="container_h3HB margin-vert--md"><time datetime="2024-08-27T00:00:00.000Z">August 27, 2024</time> · <!-- -->11 min read</div></header><div class="markdown"><p>In this age of cloud development and microservices architecture, problems start to arise with the increased workloads that run in the system. Imagine an e-commerce platform where a customer places an order for a product during a high-demand sale event. The order triggers a series of interconnected processes: payment processing, inventory checks, packaging, shipping, and final delivery. Each of these processes might be handled by different microservices, potentially running on different servers or even in different data centers. What happens if the payment service goes down right after the payment is authorized but before the inventory is updated? Or if the packaging service fails just after the inventory is deducted but before the item is packed? Without a robust mechanism to ensure that each step in the workflow completes successfully and that failures are properly handled, you could end up with unhappy customers, lost orders, and inventory discrepancies.</p>
<p>Having multiple components in your system introduces more failure points, which is a common phenomenon in complex systems. But one important behavior any application must ensure is that the execution flow reaches its completion. As systems grow in features and complexity, the likelihood of long-running processes increases. To ensure these processes complete as intended, several solutions have been introduced over the last few decades.
Let&#x27;s explore some of the solutions that have been proposed to achieve workflow completeness.</p>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="1-event-driven-architecture-with-message-queues">1. Event-Driven Architecture with Message Queues<a class="hash-link" aria-label="Direct link to 1. Event-Driven Architecture with Message Queues" title="Direct link to 1. Event-Driven Architecture with Message Queues" href="/blog#1-event-driven-architecture-with-message-queues">​</a></h3>
<p>This architecture relies heavily on services communicating by publishing and subscribing to events using message queues. Message queues are persistent storages that ensure data is not lost during failures or service unavailability. Components in a distributed system synchronize by using events/messages through these independent services. While this approach offers service decomposability and fault tolerance, it has some shortcomings. For example, using message queues comes with the overhead of managing messages (e.g., deduplication and message ordering). It also isn’t ideal for systems requiring immediate consistency across components. Some technologies and patterns that utilize this architecture include:</p>
<ul>
<li><a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">RabbitMQ</a></li>
<li><a href="https://aws.amazon.com/sqs/" target="_blank" rel="noopener noreferrer">Amazon SQS</a></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/eda.drawio-9d730aef7e9f00ffed737626d602be5c.svg" class="img_iVCH"></p>
<div style="margin-left:5em"><p>Fig. Event Driven Architecture with Message Queues - RabbitMQ</p></div>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="advantages">Advantages<a class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages" href="/blog#advantages">​</a></h4>
<ul>
<li>Improved Scalability</li>
<li>Enhanced Responsiveness</li>
<li>Enhanced Fault Tolerance</li>
<li>Simplified Complex Workflows</li>
<li>Real-Time Data Processing</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="challenges">Challenges<a class="hash-link" aria-label="Direct link to Challenges" title="Direct link to Challenges" href="/blog#challenges">​</a></h4>
<ul>
<li>Event Ordering</li>
<li>Data Consistency</li>
<li>Monitoring and Debugging</li>
<li>Event Deduplication</li>
</ul>
<p>You can mitigate or reduce these challenges by following best practices like Event Sourcing, Idempotent Processing, CQRS (Command Query Responsibility Segregation), and Event Versioning.</p>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="2-the-saga-pattern">2. The <a href="https://microservices.io/patterns/data/saga.html" target="_blank" rel="noopener noreferrer">Saga Pattern</a><a class="hash-link" aria-label="Direct link to 2-the-saga-pattern" title="Direct link to 2-the-saga-pattern" href="/blog#2-the-saga-pattern">​</a></h3>
<p>This design pattern aims to achieve consistency across different services in a distributed system by breaking complex transactions spanning multiple components into a series of local transactions. Each of these transactions triggers an event or message that starts the next transaction in the sequence. If any local transaction fails to complete, a series of compensating actions roll back the effects of preceding transactions. While the orchestration of local transactions can vary, the pattern aims to achieve consistency in a microservices-based system. Events are designed to be stored in durable storage systems or logs, providing a trail to reconstruct the system to a state after a failure. While the saga pattern is an effective way to ensure consistency, it can be challenging to implement timer/timeout-based workflows and to design and implement the compensating actions for local transactions.</p>
<p><strong>Note</strong>: In the Saga pattern, a compensating transaction must be idempotent and retryable. These principles ensure that transactions can be managed without manual intervention.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/saga.drawio-6f492c8332ead1021dde63fa7daf0efd.svg" class="img_iVCH"></p>
<div style="margin-left:10em"><p>Fig. The Saga Pattern for Order delivery system</p></div>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="advantages-1">Advantages<a class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages" href="/blog#advantages-1">​</a></h4>
<ul>
<li>Ensures data consistency in a distributed system without tight coupling.</li>
<li>Provides Roll back if one of the operations in the sequence fails.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="drawbacks">Drawbacks<a class="hash-link" aria-label="Direct link to Drawbacks" title="Direct link to Drawbacks" href="/blog#drawbacks">​</a></h4>
<ul>
<li>Might be challenging to implement initially.</li>
<li>Hard to debug.</li>
<li>Compensating transactions don’t always work.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="3-stateful-orchestrators">3. <a href="https://docs.oracle.com/en/applications/jd-edwards/cross-product/9.2/eotos/creating-a-stateful-orchestration-release-9-2-8-3.html#u30249073" target="_blank" rel="noopener noreferrer">Stateful Orchestrators</a><a class="hash-link" aria-label="Direct link to 3-stateful-orchestrators" title="Direct link to 3-stateful-orchestrators" href="/blog#3-stateful-orchestrators">​</a></h3>
<p>Stateful orchestrators provide a solution for long-running workflows by maintaining the state of each step in a workflow. Each step in a workflow represents a task, and these tasks are represented as states inside workflows. Workflows are defined as state machines or directed acyclic graphs (DAGs). In this approach, an orchestrator handles task execution order, transitioning, handling retries, and maintaining state. In the event of a failure, the system can recover from the persisted state. Stateful orchestrators offer significant value in fault tolerance, consistency, and observability. It’s one of the solutions proven effective in modern distributed computing. Some well-known services that provide this solution include:</p>
<ul>
<li><a href="https://airflow.apache.org/docs/apache-airflow/stable/core-concepts/overview.html" target="_blank" rel="noopener noreferrer">Apache Airflow</a></li>
<li><a href="https://azure.microsoft.com/en-us/products/logic-apps" target="_blank" rel="noopener noreferrer">Azure Logic Apps</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="advantages-2">Advantages<a class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages" href="/blog#advantages-2">​</a></h4>
<ul>
<li><strong>High Resiliency</strong>: Stateful orchestrators provide high resiliency in case of outages, ensuring that workflows can continue from where they left off.</li>
<li><strong>Data Persistence</strong>: They allow you to keep, review, or reference data from previous events, which is useful for long-running processes.</li>
<li><strong>Extended Runtime</strong>: Stateful workflows can continue running for much longer than stateless workflows, making them suitable for complex and long-running tasks.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="challenges-1">Challenges<a class="hash-link" aria-label="Direct link to Challenges" title="Direct link to Challenges" href="/blog#challenges-1">​</a></h4>
<ul>
<li><strong>Additional Complexity</strong>: They introduce additional complexity, requiring you to manage issues such as load balancing, CPU and memory usage, and networking.</li>
<li><strong>Cost</strong>: With stateful workflows, you pay for the VMs that are running in the cluster, whereas with stateless workflows, you pay only for the actual compute resources consumed.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="4-durable-execution">4. Durable Execution<a class="hash-link" aria-label="Direct link to 4. Durable Execution" title="Direct link to 4. Durable Execution" href="/blog#4-durable-execution">​</a></h3>
<p>Durable execution refers to the ability of a system to preserve the state of an application and persist execution despite failures or interruptions. Durable execution ensures that for every task, its inputs, outputs, call stack, and local variables are persisted. These constraints, or rather features, allow a system to automatically retry or continue running in the face of infrastructure or system failures, ultimately ensuring completion.</p>
<p>Durable execution isn’t a completely distinct solution from the ones listed above but rather incorporates some of their strengths while presenting a more comprehensive approach to achieving consistency, fault tolerance, data integrity, resilience for long-running processes, and observability.</p>
<img src="/images/blog/execution-flow-paradigms/durable-exec.svg" alt="Durable workflow engine - Temporal">
<div style="margin-left:15em">Fig. Durable workflow engine</div>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="advantages-3">Advantages<a class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages" href="/blog#advantages-3">​</a></h4>
<ul>
<li><strong>Reduced Manual Intervention</strong>: Minimizes the need for human intervention by handling retries and failures programmatically.</li>
<li><strong>Improved Observability</strong>: Provides a clear audit trail and visibility into the state of workflows, which aids in debugging and monitoring.</li>
<li><strong>Scalability</strong>: Scales efficiently across distributed systems while maintaining workflow integrity.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="challenges-2">Challenges<a class="hash-link" aria-label="Direct link to Challenges" title="Direct link to Challenges" href="/blog#challenges-2">​</a></h4>
<ul>
<li><strong>Resource Intensive</strong>: Persistent state storage and management can consume significant resources, especially in large-scale systems.</li>
<li><strong>Latency</strong>: The need to persist state and handle retries can introduce latency in the execution flow.</li>
</ul>
<p>As durable execution grows to be a fundamental driver of distributed computing, some of the solutions which use this architecture are</p>
<ul>
<li><a href="https://temporal.io/" target="_blank" rel="noopener noreferrer">Temporal</a></li>
<li><a href="https://cadenceworkflow.io/" target="_blank" rel="noopener noreferrer">Uber Cadence</a></li>
</ul>
<p>Among these, <a href="https://temporal.io/" target="_blank" rel="noopener noreferrer">Temporal</a> has grown in influence, used by companies like SnapChat, HashiCorp, Stripe, DoorDash, and DataDog. Its success is driven by its practical application in real-world scenarios and the expertise of its founders.</p>
<p>At Metatype, we recognize the value of durable execution and are committed to making it accessible. Our <a href="/docs/reference/runtimes/temporal">Temporal Runtime</a> integrates seamlessly into our declarative API development platform, enabling users to harness the power of Temporal directly within Metatype. For those interested in exploring further, our documentation provides a detailed guide on getting started with <a href="/docs/reference/runtimes/temporal">Temporal Runtime</a>.</p>
<p>Below is an example of how you can build a simple API to interact with an order delivery temporal workflow within Metatype.</p>
<div class="theme-admonition theme-admonition-note admonition_YYWW alert alert--secondary"><div class="admonitionHeading_vFJj"><span class="admonitionIcon_OgGg"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_rC2G"><p>If you are new to Metatype or haven’t set it up yet in your development environment. You can follow this <a href="/docs/tutorials/quick-start">guideline</a>.</p></div></div>
<p>For this example, the order delivery system will have few components/services such as Payment, Inventory and Delivery.</p>
<p>Your temporal workflow definition should look similar to the one below.</p>
<ul class="pl-0 m-0 list-none text-sm"><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" checked="" value="typescript"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Typescript SDK</div></label></div></li><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" value="python"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Python SDK</div></label></div></li></ul><div role="tabpanel" class="tabItem_iUri"><details class="details_tWT4 alert alert--info details_CNax" data-collapsed="true"><summary>Activities definition inside <code>src/activities.ts</code>:`</summary><div><div class="collapsibleContent_JWUV"><div class="language-typescript codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-typescript codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name builtin">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">processPayment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Processing payment for order </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">orderId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Simulate payment processing logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Payment processed&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkInventory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Checking inventory for order </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">orderId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Simulate inventory check logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Inventory available&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deliverOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Delivering order </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">orderId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Simulate delivery logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Order delivered&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_tWT4 alert alert--info details_CNax" data-collapsed="true"><summary>Workflow definition inside <code>src/workflows.ts</code>:</summary><div><div class="collapsibleContent_JWUV"><div class="language-typescript codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-typescript codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> processPayment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> checkInventory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> deliverOrder </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token generic-function function" style="color:#d73a49">proxyActivities</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">{</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name">    </span><span class="token generic-function generic class-name function" style="color:#d73a49">processPayment</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">(</span><span class="token generic-function generic class-name">orderId</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">)</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">Promise</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">;</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name">    </span><span class="token generic-function generic class-name function" style="color:#d73a49">checkInventory</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">(</span><span class="token generic-function generic class-name">orderId</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">)</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">Promise</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">;</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name">    </span><span class="token generic-function generic class-name function" style="color:#d73a49">deliverOrder</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">(</span><span class="token generic-function generic class-name">orderId</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">)</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">Promise</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">;</span><span class="token generic-function generic class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token generic-function generic class-name">  </span><span class="token generic-function generic class-name punctuation" style="color:#393A34">}</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    startToCloseTimeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10 seconds&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OrderWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> paymentResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">processPayment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inventoryResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkInventory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deliveryResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deliverOrder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">orderId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Order </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">orderId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> completed with results: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">paymentResult</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">, </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">inventoryResult</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">, </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">deliveryResult</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_tWT4 alert alert--info details_CNax" data-collapsed="true"><summary>Worker definintion inside <code>src/worker.ts</code>:</summary><div><div class="collapsibleContent_JWUV"><div class="language-typescript codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-typescript codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> NativeConnection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Worker </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@temporalio/worker&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> activities </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./activities&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TASK_QUEUE_NAME</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./shared&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> connection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> NativeConnection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost:7233&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> worker </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    connection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    taskQueue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TASK_QUEUE_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workflowsPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./workflows&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    activities</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>After you have setup the above components, now you need a client to start of any <code>OrderWorkflow</code>. Here is where metatype comes in, through the simple APIs <a href="/docs/reference/runtimes/temporal">Temporal Runtime</a> exposes, you can communicate with your temporal cluster.
Down below is the workflow communication bridge for this system expressed within a <a href="/docs/reference/typegraph">typegraph</a> which includes endpoints to start a new workflow and describe an existing one.</p><div class="language-typescript codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-typescript codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Policy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> typegraph </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@typegraph/sdk/index.ts&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> TemporalRuntime </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@typegraph/sdk/providers/temporal.ts&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">typegraph</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;order_delivery&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">g</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Policy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">public</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> temporal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TemporalRuntime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;order_delivery&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      hostSecret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HOST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      namespaceSecret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;NAMESPACE&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> workflow_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;order-delivery-1&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> order_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">expose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> temporal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">startWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;OrderWorkflow&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> order_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        describe</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> workflow_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> temporal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">describeWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> workflow_id </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> temporal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">describeWorkflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div>
<p>You need to add the secrets <code>HOST</code> and <code>NAMESPACE</code> under your typegraph name inside the <code>metatype.yaml</code> file. These secrets are important to connect with your temporal cluster and can be safely stored in the config file as shown below.</p>
<details class="details_tWT4 alert alert--info details_CNax" data-collapsed="true"><summary>metatype.yaml</summary><div><div class="collapsibleContent_JWUV"><div class="language-yaml codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-yaml codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">typegate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dev</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://localhost:7890&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">example</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">POSTGRES</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;postgresql://postgres:password@postgres:5432/db&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">MONGO</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mongodb://root:password@mongo:27017/db&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">HOST</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://localhost:7233&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">NAMESPACE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>You need to add only the last two lines as the others are auto-generated. Note that secrets are defined under the <code>example</code> parent, which is the name of your typegraph. If the name doesn&#x27;t match, you will face secret not found issues when deploying your typegraph.</p>
<p>Before deploying the above typegraph, you need to start the temporal server and the worker. You need to have <a href="https://learn.temporal.io/getting_started/typescript/dev_environment/#set-up-a-local-temporal-service-for-development-with-temporal-cli" target="_blank" rel="noopener noreferrer">temporal</a> installed on your machine.</p>
<details class="details_tWT4 alert alert--info details_CNax" data-collapsed="true"><summary>Boot up temporal</summary><div><div class="collapsibleContent_JWUV"><p>Start the temporal server.</p><div class="language-bash codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-bash codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">temporal server start-dev</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Start the worker.</p><ul class="pl-0 m-0 list-none text-sm"><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" checked="" value="typescript"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Typescript SDK</div></label></div></li><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" value="python"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Python SDK</div></label></div></li></ul><div role="tabpanel" class="tabItem_iUri"><p><code>typescript npx ts-node src/worker.ts </code></p></div></div></div></details>
<p>After booting the temporal server, run the command down below to get a locally spinning <a href="/docs/reference/typegate">typegate</a> instance with your typegraph deployed.</p>
<div class="language-bash codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-bash codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">meta dev</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After completing the above steps, you can access the web GraphQL client of the typegate at <a href="http://localhost:7890/example" target="_blank" rel="noopener noreferrer"><code>http://localhost:7890/example</code></a>. Run this query inside the client to start your workflow.</p>
<div class="language-graphql codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-graphql codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query property-mutation">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">workflow_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token description string language-markdown" style="color:#e3116c">order-delivery-3</span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">task_queue</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token description string language-markdown" style="color:#e3116c">order-delivery-queue</span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;order12&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After a successful run, you will get the following result which includes the <code>run_id</code> of the workflow which has just been started.</p>
<img src="/images/blog/execution-flow-paradigms/start-workflow-result.png" alt="Query result">
<p>You can also check the temporal web UI to monitor your workflows and you should see a result similar to this one.</p>
<img src="/images/blog/execution-flow-paradigms/temporal-web-ui.png" alt="Workflows dashboard">
<p>You can explore the <a href="/docs/reference/runtimes/temporal">Temporal Runtime</a> for more info.</p>
<p>This wraps up the blog, thanks for reading until the end :)</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vgDZ"><a href="/blog/2024/08/26/python-on-webassembly">Python on WebAssembly: How?</a></h2><div class="container_h3HB margin-vert--md"><time datetime="2024-08-26T00:00:00.000Z">August 26, 2024</time> · <!-- -->12 min read</div></header><div class="markdown"><p>Metatype&#x27;s different language runtimes are nice, but integrating one is an entire story. Let&#x27;s discover how we managed to implement one for Python.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="why">Why?<a class="hash-link" aria-label="Direct link to Why?" title="Direct link to Why?" href="/blog#why">​</a></h2>
<p>You have probably heard of &quot;Function as a Service&quot; or FaaS.
In simple terms, FaaS are platforms that allow users to run code in response to events without the hassle of managing the underlying infrastructure.
Users submit their programs and the platform takes care of the rest including, usually, scaling, availability, and configuration.
AWS Lambda is one such example and FaaS as a whole are a popular implementation of the serverless model.</p>
<p>Metatype has this model at heart with applications composed of small functions that respond to events like http requests and authorization checks.
This is achieved through runtimes like the <a href="/docs/reference/runtimes/deno"><code>DenoRuntime</code></a> which implements a way to execute functions authored in Typescript using Web Workers as implemented by <a href="https://docs.deno.com/runtime/manual/runtime/workers/" target="_blank" rel="noopener noreferrer">Deno</a> (not based on Deno Deploy).</p>
<div class="theme-admonition theme-admonition-note admonition_YYWW alert alert--secondary"><div class="admonitionHeading_vFJj"><span class="admonitionIcon_OgGg"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_rC2G"><p>Metatype supports running multiple apps or typegraphs on a single deployed cluster but we&#x27;re still in the kitchen on a hosted cloud solution.
Subscribe to the <a href="https://metatype.dev/blog/rss.xml" target="_blank" rel="noopener noreferrer">blog</a> or the <a href="https://github.com/metatypedev/metatype" target="_blank" rel="noopener noreferrer">Github</a> repository for updates.</p></div></div>
<p>Implementing the <code>DenoRuntime</code> was a very straightforward affair as the Typegate (the engine at the heart of Metatype) is primarily written in Typescript and runs on a slightly modified version of the Deno runtime.
What&#x27;s more, JavaScript has single threaded and asynchronous semantics and the v8 engine that it commonly runs on is of very high-quality by all regards.
These qualities lend themselves very well to the requirements of running a serverless platform like security (good sandboxing) and performance (low start-up latencies).
This fact is reflected in the dominance of JavaScript in the serverless market though it doesn&#x27;t hurt that it&#x27;s also the most popular language in use today.</p>
<p>Another very popular language is Python; and its standard library can be quite resourceful for this type of use case.
However, as we shall see, integrating the Python runtime isn&#x27;t as simple as integrating Deno.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="what-are-the-requirements">What are the requirements?<a class="hash-link" aria-label="Direct link to What are the requirements?" title="Direct link to What are the requirements?" href="/blog#what-are-the-requirements">​</a></h2>
<p>There are a number of Python runtimes available but a set of extra factors limit what we can achieve.</p>
<ol>
<li><strong>Security</strong>: functions should have limited access to the execution environment. Python doesn&#x27;t have built-in features for sandboxing out of the box unlike Deno.</li>
<li><strong>Speed</strong>: functions should run fast and with low latency. We&#x27;re interested in metrics like cold-start latency and overhead of any cross process/system communication.</li>
<li><strong>User-friendliness</strong>: functionalities provided in any of the languages supported by Metatype should, within reason, mirror each other and maintain a degree of uniformity. We support inline code snippets and external file references for <code>DenoRuntime</code> and this should be the case for Python as well.</li>
<li><strong>Interoperability</strong>: functions running in Python will need to have access to other parts of the app running on the Typegate like being able to invoke other functions.</li>
</ol>
<p>The Typegate is a TypeScript program with a bit of Rust sprinkled in.
It runs as a traditional POSIX process.
Think Linux containers.
This fact renders multi-processing, one of the readily apparent approaches, undesirable as it would require investing is robust worker process management and distribution schemes.
It&#x27;d be great if we could keep everything inside the Typegate process.</p>
<p>One solution that presents itself here is the <a href="https://pyo3.rs/" target="_blank" rel="noopener noreferrer">PyO3</a> project which provide Rust bindings to different Python runtimes like CPython and PyPy.
It&#x27;d not only allow us to run Python code in-process but it also provide an easy way to expose the functions written in Rust to Python and vice-versa.
A good solution for the bidirectional communication needed for our interoperability requirements.</p>
<p>Unfortunately, PyO3 doesn&#x27;t have any provisions for sandboxing which is critical for our use case.
This is where WebAssembly enters into the picture.
WebAssembly or Wasm for short is a executable bytecode format that originates from the web world and is designed for applications that run inside web-browsers.
This use case shares most of our requirements and the Wasm world promises excellent sandboxing properties that should be perfect for our use case.
We just have to find a way to run Python inside of it.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="an-aside-on-wasi">An aside on WASI<a class="hash-link" aria-label="Direct link to An aside on WASI" title="Direct link to An aside on WASI" href="/blog#an-aside-on-wasi">​</a></h2>
<p>WebAssembly System Interface (WASI) is an additional spec for the bytecode format that formalizes how Wasm programs access their host environment.
A lot like POSIX, this generally means OS capabilities such as file system access and networking but also, in it&#x27;s latest iteration extends to any custom host defined functionality.</p>
<p>Wasm + WASI fits very well to our use case. As opposed to mutli-processing, we can instantiate, manage, and expose resources programmatically with ease.
And as luck would have it, some <a href="https://github.com/vmware-labs/webassembly-language-runtimes" target="_blank" rel="noopener noreferrer">community work</a> has already been done at the time that led to wasm builds of CPython being available.</p>
<p>Unfortunately, the WASI spec itself is a work in progress.
When we started out, only the limited &quot;<a href="https://github.com/WebAssembly/WASI/blob/main/legacy/preview1/docs.md" target="_blank" rel="noopener noreferrer">preview1</a>&quot; implementation was supported by most runtimes.
<code>preview1</code> only focused on a standard set of host functionalities much like a <code>libc</code> implementation.
Well enough but any custom functionality meant having to rely on simple C ABI alike functions for <em>intra</em>-process communication.
In order to make this work easier, we elected to bring PyO3 back into the picture so that all the IPC stuff is written in Rust, the language with the most support in the Wasm ecosystem today.</p>
<p>All in all, this would mean the python interpreter wrapped in a PyO3 based native API.
An assembly that accepts user code as strings and then invokes them in response to events.
All of this would be running inside a Wasm runtime, <a href="https://wasmedge.org/" target="_blank" rel="noopener noreferrer">WasmEdge</a> in this case, which ticks of all of the sandboxing and security requirements.
This approach is well described as the <a href="https://wasmcloud.com/blog/webassembly-patterns-command-reactor-library#the-reactor-pattern" target="_blank" rel="noopener noreferrer">Reactor pattern</a>, a common pattern used in Wasm land.</p>
<img src="/images/wasi_vfs_python_and_rust.svg" alt="FIRST SOLUTION">
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="file-system-access">File system access<a class="hash-link" aria-label="Direct link to File system access" title="Direct link to File system access" href="/blog#file-system-access">​</a></h3>
<p>Since the PyO3 project doesn&#x27;t support <a href="https://github.com/PyO3/pyo3/issues/416" target="_blank" rel="noopener noreferrer">statically linking</a> the Python runtime, we&#x27;ll need to find a way dynamically link <code>libpython</code>.
Thankfully, Wasm does support <a href="https://github.com/WebAssembly/design/blob/main/DynamicLinking.md" target="_blank" rel="noopener noreferrer">dynamic linking</a> and wasm builds of <a href="https://github.com/vmware-labs/webassembly-language-runtimes/tree/main/python" target="_blank" rel="noopener noreferrer"><code>libpython</code></a> are available curtsy of the WebAssembly Language Runtimes project.
Bringing all of this together isn&#x27;t as simple though as PyO3&#x27;s tries to load <code>libpython</code> from certain <em>paths</em>, a concept that isn&#x27;t exactly clearly defined in Wasm&#x27;s post POSIX webtopia.</p>
<p>Our first solution was to use <a href="https://github.com/kateinoigakukun/wasi-vfs" target="_blank" rel="noopener noreferrer">wasi-vfs</a>, a tool which allows you to embed a virtual file system, accessible through preview1 APIs, directly into your wasm binaries.
This way, we could prepare a single wasm artifact that contains both the <code>libpython</code> build and the custom glue code.</p>
<p>This approach turned out to be quite hacky though and after encountering several issues, we ultimately decided to go with <strong>preopens</strong>.
Preopens are another virtual file-system solution where you map an actual file-system directory to a virtual directory visible to a running Wasm instance.
This means we&#x27;ll need to prepare the <code>libpython</code> Wasm file on disk before running the instance but it was an acceptable solution.
We also use preopens to provide some of the user submitted code to our custom python runtime.</p>
<p>The following rust snippet demonstrates the preopens looked like in use:</p>
<div class="language-rust codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-rust codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">init_Python_vm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Result</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token class-name">Rt</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> preopens </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">vec!</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// User script will be uploaded at ./src/Python which is virtually seen as /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Each script has access only to /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;/app:./src/Python:readonly&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">to_owned</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This follow the same idea as above, but for clarity&#x27;s sake we decided to separate it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> pylib </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">PathBuf</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./vendor/libpython/usr/local/lib&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This is our wasm module reponsible for running Python scripts at runtime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// It assumes /app and libpython to be available in its world</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> wasi_mod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">PathBuf</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./build/Python-wasi-reactor.wasm&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Now we can instantiate the WASI module with all the configurations above</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> rt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">instantiate_custom_python_runtime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preopens</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pylib</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wasi_mod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run_func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;init_Python&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">params!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Ok</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="wasi-02">WASI 0.2<a class="hash-link" aria-label="Direct link to WASI 0.2" title="Direct link to WASI 0.2" href="/blog#wasi-02">​</a></h3>
<p>The solution described above worked well to an extent but the limitations of preview1 and all the wrangling with PyO3 resulted in complexity that we were always ready to get rid of.
This was exactly what we did after the Bytecode Alliance finalized <a href="https://bytecodealliance.org/articles/WASI-0.2" target="_blank" rel="noopener noreferrer">WASI 0.2</a> back in January 2024 and with it, a slew of new opportunuties.</p>
<p>WASI 0.2 introduces a whole new concept of components, wasm modules that come with pre-specifed interfaces using the <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/WIT.md" target="_blank" rel="noopener noreferrer">Wit</a> format and based on a whole new <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/CanonicalABI.md" target="_blank" rel="noopener noreferrer">ABI</a> to boot.
These new capabilities suggest that it should possible to replace our PyO3 based glue code with the WASI based layer.
Let&#x27;s see how.</p>
<p>We first used the new found WASI powers to implement support for Wasm based functions through the <a href="/docs/reference/runtimes/wasm"><code>WasmRuntime</code></a>.
This lead us to implement the <a href="https://github.com/metatypedev/metatype/blob/2e692b9ae9e48b6e1a863130fc1bfbdd004cb631/src/wit/wit-wire.wit" target="_blank" rel="noopener noreferrer"><code>wit_wire</code></a> protocol, a simple JSON based WIT interface that&#x27;d be used by any wasm component that intenteds to run on the <code>WasmRuntime</code>.
Simple enough that it&#x27;s reproduced down below in it&#x27;s entirety.</p>
<div class="language-wit codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-wit codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">package metatype:wit-wire;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// what the host provides</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface typegate-wire {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hostcall: func(op-name: string, json: string) -&gt; result&lt;string, string&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// what&#x27;s expected from the guest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface mat-wire {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // init function called when we first make the component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  init: func(args: init-args) -&gt; result&lt;init-response, init-error&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // general purpose event handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  handle: func(req: handle-req) -&gt; result&lt;json-str, handle-err&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type json-str = string;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  record init-args {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the list of operations the application is expecting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // from this component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expected-ops: list&lt;mat-info&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metatype-version: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  record mat-info {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    op-name: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mat-title: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mat-data-json: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  record init-response {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ok: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  variant init-error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version-mismatch(string),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unexpected-mat(mat-info),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    other(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  record handle-req {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    op-name: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in-json: json-str,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  variant handle-err {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    no-handler,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in-json-err(string),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    handler-err(string),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// a world defines what interfaces get imported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// and exported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">world wit-wire {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import typegate-wire;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export mat-wire;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Squint your eyes tight enough and the <code>wit_wire</code> protocol as implemented wasn&#x27;t far off from what the PyO3 based glue code was doing in the previous implementation.
Specifically, register a list of operations that the Typegate is expecting from the module and execute them for incoming event.
We just need to add support for the operation metadata to contain extra items.
In the case of the <a href="/docs/reference/runtimes/python"><code>PythonRuntime</code></a>, this would be the Python code itself.</p>
<p>Now that we have the <code>wit_wire</code> implementation taking care of bidirectional communication, we have little reason to keep the PyO3 based glue code around.
This glue was doing a bit more than acting as a boundary though.
It was also responsible for setting up the operating environment for the Python code.
For example, we&#x27;d need some kind of initialization to execute the user&#x27;s Python snippets which are in free standing <code>lambda</code> form.
How does one create components out of Python anyways?</p>
<p><a href="https://github.com/bytecodealliance/componentize-py" target="_blank" rel="noopener noreferrer">componentize-py</a> is a tool authored by the Bytecode Alliance that allows you to produce WASI components that are authored in Python.
It has code generation suite that emits guest bindings in Python for any WIT specification you feed it.
It then takes your Python code written against these bindings and embeds them in a Wasm build of the Python interpreter to produce a component that supports the specified Wit.</p>
<p>Unsurprisingly, componentize-py relies on PyO3 and preopens itself in addition to <a href="https://github.com/dicej/component-init" target="_blank" rel="noopener noreferrer">component-init</a>, a solution to pre-intialize components up to a certain point for improved startup latencies.
This pre-intialization means we won&#x27;t need to provide the actual preopens for the resulting component, baking the <code>libpython</code> object code directly into it as PyO3 will have dynamically loaded the object code by that point.
Ultimately, this allows us to write all of our glue code in Python itself.</p>
<p>We still need a bit of Rust to support the <code>wit_wire</code> interface on the Typegate but this implementation is general across both the <code>PythonRuntime</code> and <code>WasmRuntime</code>.
We&#x27;d also moved to the <a href="https://wasmtime.dev/" target="_blank" rel="noopener noreferrer">Wasmtime</a>, also by Bytecode Alliance, for our wasm workloads at this point and their Rust bindings are a pleasure to use.
It&#x27;s all smooth sailing from here.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="cloudy-skies">Cloudy skies?<a class="hash-link" aria-label="Direct link to Cloudy skies?" title="Direct link to Cloudy skies?" href="/blog#cloudy-skies">​</a></h2>
<p>A final stumbling block for this approach was the many seconds Wasmtime spends cooking all your CPU cores when it compiles the fat wasm module that contains the Python interpreter, Pyo3 bindings and more.
This happens because Wasmtime does&#x27;t (<a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/wasmtime-baseline-compilation.md" target="_blank" rel="noopener noreferrer">yet</a>) implement any schemes for tiered compilation, all code being greeted by their optimizing compiler, Cranelift.
And optimizations take time.
Sure, you only pay this cost the first time you load the Python runtime module as Wasmtime has great support for caching including on-disk caching.
But, 10+ second cold-starts, as measured on one developer&#x27;s machine, are unacceptable in a system that primarily serves HTTP requests.
What to do?</p>
<p>Wasmtime has just the feature for this problem, <a href="https://docs.wasmtime.dev/cli-options.html#compile" target="_blank" rel="noopener noreferrer">pre-compilation</a>.
Ahead-of-time compilation of wasm bytecode into a native instruction set.
Such files are commonly given the <code>.cwasm</code> extesion, <em>c</em> for compiled, and they are not a standalone executable but inteded to be run within Wasmtime&#x27;s sandbox.
This eliminates the compliation cost but the semantics of the source wasm bytecode and the runtime safe-guards means that this should be just as safe as JITting it (just-in-time compilation).
We then statically embed this pre-compiled wasm artifact, after compressing it, in the Typegate binary removing the need for sidecar files while ensuring minimal cold-starts for our python workloads.
To be concrete, this means <em>roughly</em> around 200 ms of overhead for a cold function and 5 ms for a warm one.
Good enough.</p>
<p>This post describes the technical journey we took to arrive to the current implementation of the <code>PythonRuntime</code>. Hopefully, all details were clear enough and please direct any feedback, questions, and thoughts to the comments down below and our Github issues/discussion board.</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vgDZ"><a href="/blog/2024/05/09/programmatic-deployment">Programmatic deployment (v0.4.x)</a></h2><div class="container_h3HB margin-vert--md"><time datetime="2024-05-09T00:00:00.000Z">May 9, 2024</time> · <!-- -->4 min read</div></header><div class="markdown"><p>A new approach to deploying typegraphs has been introduced starting with version 0.4.0. This aims to facilitate the development of automation tools around the APIs you build within the Metatype ecosystem.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="what-has-changed">What has changed?<a class="hash-link" aria-label="Direct link to What has changed?" title="Direct link to What has changed?" href="/blog#what-has-changed">​</a></h2>
<p>Before v0.4.x, we had to entirely rely on the <a href="/docs/reference/meta-cli">meta cli</a> to deploy typegraphs to a typegate instance.</p>
<p>This is no longer the case, as all core logic has been moved to the TypeScript/Python typegraph SDKs, both of which share the same WebAssembly-based <strong>typegraph-core</strong> behind the scenes. This provides some degree of assurance that you will have nearly identical experiences with each SDK.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="what-are-the-use-cases">What are the use-cases?<a class="hash-link" aria-label="Direct link to What are the use-cases?" title="Direct link to What are the use-cases?" href="/blog#what-are-the-use-cases">​</a></h2>
<p>Since typegraphs can be written using the programming language your preferred SDK is based on, you can dynamically create typegraphs with ease.</p>
<p>The missing piece was having an interface natively backed inside the SDK for doing deployment programmatically.</p>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="programmatic-deployment">Programmatic deployment<a class="hash-link" aria-label="Direct link to Programmatic deployment" title="Direct link to Programmatic deployment" href="/blog#programmatic-deployment">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="initial-setup">Initial setup<a class="hash-link" aria-label="Direct link to Initial setup" title="Direct link to Initial setup" href="/blog#initial-setup">​</a></h3>
<p>Just like any other dependency in your favorite programming language, each SDKs can be installed with your favorite package manager.</p>
<p>You can use one of the commands below to get started with the latest available version.</p>
<ul class="pl-0 m-0 list-none text-sm"><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" checked="" value="typescript"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Typescript SDK</div></label></div></li><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" value="python"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Python SDK</div></label></div></li></ul><div role="tabpanel" class="tabItem_iUri"><p>To upgrade the <em>Typescript</em> SDK of the typegraph package, you can use one of the following commands:</p>
<ul>
<li>Node</li>
</ul>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">npm update @typegraph/sdk</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Deno</li>
</ul>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">deno cache --reload &quot;npm:@typegraph/sdk&quot;</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_gmPS" id="configuration">Configuration<a class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" href="/blog#configuration">​</a></h4>
<p>This is analoguous to the yaml configuration file when you are using <a href="/docs/reference/meta-cli">meta cli</a>.</p>
<p>It&#x27;s the place where you tell which typegate you want to deploy to, how you want the artifacts to be resolved, among other settings.</p>
<ul class="pl-0 m-0 list-none text-sm"><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" checked="" value="typescript"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Typescript SDK</div></label></div></li><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" value="python"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Python SDK</div></label></div></li></ul><div role="tabpanel" class="tabItem_iUri"><div class="language-typescript codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-typescript codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typegate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;TYPEGATE_URL&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BasicAuth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;USERNAME&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;PASSWORD&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typegraphPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;path-to-typegraph.ts&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prefix</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  secrets</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">POSTGRES</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;DB_URL&gt;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  migrationsDir</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;prisma-migrations&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  defaultMigrationAction</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reset</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// allow destructive migrations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="deployremove">Deploy/remove<a class="hash-link" aria-label="Direct link to Deploy/remove" title="Direct link to Deploy/remove" href="/blog#deployremove">​</a></h3>
<p>Now, picture this, you have a lot of typegraphs and one or more typegate instance(s) running, you can easily make small scripts that does any specific job you want.</p>
<div class="language-typescript codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-typescript codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> tgDeploy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tgRemove </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@typegraph/sdk/tg_deploy.js&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BASIC_AUTH</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadMyAuthsFromSomeSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TYPEGATE_URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;...&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getTypegraphs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Suppose we have these typegraphs..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Let&#x27;s enumerate them like this to simplify</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tg</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;path/to/shop-finances&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      location</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;path/to/shop-finances.ts&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tg</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;path/to/shop-stats&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      location</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;path/to/shop-stats.ts&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tgName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tgLocation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Note: You can always develop various ways of constructing the configuration,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// like loading it from a file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typegate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;TYPEGATE_URL&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      auth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BasicAuth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;USERNAME&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;PASSWORD&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typegraphPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;path-to-typegraph.ts&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prefix</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    secrets</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">POSTGRES</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;DB_URL&gt;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    migrationsDir</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;prisma-migrations&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    defaultMigrationAction</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      reset</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// allow destructive migrations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deployAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> typegraphs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getTypegraphs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> tg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> location </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> typegraphs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// use tgDeploy to deploy typegraphs, it will contain the response from typegate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> typegate </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tgDeploy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> selection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> typegate</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">addTypegraph</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selection</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> messages </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selection</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">messages</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> text </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> text</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">typegate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;[!] Failed deploying&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">undeployAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> typegraphs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getTypegraphs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> tg </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> typegraphs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// use tgRemove to remove typegraphs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> typegate </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tgRemove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;TYPEGRAPH_NAME&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        baseUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TYPEGATE_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BASIC_AUTH</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">typegate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed removing&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="going-beyond">Going beyond<a class="hash-link" aria-label="Direct link to Going beyond" title="Direct link to Going beyond" href="/blog#going-beyond">​</a></h3>
<p>With these new additions, you can automate virtually anything programmatically on the typegraph side. Starting from having highly dynamic APIs to providing ways to deploy and configure them, you can even build a custom framework around the ecosystem!</p>
<p>Please tell us what you think and report any issues you found on <a href="https://github.com/metatypedev/metatype/issues" target="_blank" rel="noopener noreferrer">Github</a>.</p>
<div class="theme-admonition theme-admonition-info admonition_YYWW alert alert--info"><div class="admonitionHeading_vFJj"><span class="admonitionIcon_OgGg"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Notes</div><div class="admonitionContent_rC2G"><p>You can check the <a href="/docs/guides/programmatic-deployment">Programmatic deployment</a> reference page for more information.</p></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vgDZ"><a href="/blog/2023/11/27/node-compatibility">The Node/Deno SDK is now available</a></h2><div class="container_h3HB margin-vert--md"><time datetime="2023-11-27T00:00:00.000Z">November 27, 2023</time> · <!-- -->2 min read</div></header><div class="markdown"><p>We are happy to announce that we have redesigned our SDKs to support Node/Deno and facilitate the integration of future languages. Most of the <a href="/docs/reference/typegraph">typegraph SDK</a> is now written in Rust and shaped around a core interface running in WebAssembly.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="meet-wit">Meet <code>wit</code><a class="hash-link" aria-label="Direct link to meet-wit" title="Direct link to meet-wit" href="/blog#meet-wit">​</a></h2>
<p>In the realm of WebAssembly, the <a href="https://github.com/bytecodealliance/wit-bindgen" target="_blank" rel="noopener noreferrer">wit-bindgen</a> project emerges as the most mature tool to create and maintain the language bindings for WebAssembly modules. This tool introduces WIT (WebAssembly Interface Types) as an Interface Definition Language (IDL) to describe the imports, exports, and capabilities of WebAssembly components seamlessly.</p>
<p>For example, Metatype implements the reactor pattern to handle requests as they come and delegate part of their execution in correct WASM runtime. The wit-bindgen helps there to define the interfaces between the guest (the Metatype runtime) and the host (the typegate) to ensure the correct serialization of the payloads. The <code>wit</code> definition could look like this:</p>
<div class="codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-text codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">package metatype:wit-wire;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface typegate-wire {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hostcall: func(op-name: string, json: string) -&gt; result&lt;string, string&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface mat-wire {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  record handle-req {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    op-name: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in-json: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  handle: func(req: handle-req) -&gt; result&lt;string, string&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">world wit-wire {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import typegate-wire;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export mat-wire;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>wit</code> file is then used to generate the bindings for the host and the guest in Rust, TypeScript, Python, and other languages. The host bindings are used in the typegate to call the WASM runtime, and the guest bindings are used in the WASM runtime to call the typegate.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="install-the-v02x-series">Install the v0.2.x series<a class="hash-link" aria-label="Direct link to Install the v0.2.x series" title="Direct link to Install the v0.2.x series" href="/blog#install-the-v02x-series">​</a></h2>
<p>The documentation contains now examples for Node and Deno.</p>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="upgrade-with-node">Upgrade with Node<a class="hash-link" aria-label="Direct link to Upgrade with Node" title="Direct link to Upgrade with Node" href="/blog#upgrade-with-node">​</a></h3>
<div class="language-bash codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-bash codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @typegraph/sdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">meta new --template node .</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="upgrade-with-deno">Upgrade with Deno<a class="hash-link" aria-label="Direct link to Upgrade with Deno" title="Direct link to Upgrade with Deno" href="/blog#upgrade-with-deno">​</a></h3>
<div class="language-bash codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-bash codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">meta new --template deno .</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-typescript codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-typescript codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> typegraph </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;npm:@typegraph/sdk/index.js&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="upgrade-with-python">Upgrade with Python<a class="hash-link" aria-label="Direct link to Upgrade with Python" title="Direct link to Upgrade with Python" href="/blog#upgrade-with-python">​</a></h3>
<div class="language-python codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-python codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">pip3 install </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">upgrade typegraph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">poetry add typegraph@latest</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="give-us-feedback">Give us feedback!<a class="hash-link" aria-label="Direct link to Give us feedback!" title="Direct link to Give us feedback!" href="/blog#give-us-feedback">​</a></h2>
<p>This new release enables us to provide a consistent experience across all languages and reduce the work to maintain the existing Python SDK.</p>
<p>As always, report issues and let us know what you think on <a href="https://github.com/metatypedev/metatype/discussions" target="_blank" rel="noopener noreferrer">GitHub</a>.</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vgDZ"><a href="/blog/2023/06/18/programmable-glue">Programmable glue for developers</a></h2><div class="container_h3HB margin-vert--md"><time datetime="2023-06-18T00:00:00.000Z">June 18, 2023</time> · <!-- -->2 min read</div></header><div class="markdown"><p>We are introducing Metatype, a new project that allows developers to build modular and strongly typed APIs using typegraph as a programmable glue.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="what-is-metatype">What is Metatype?<a class="hash-link" aria-label="Direct link to What is Metatype?" title="Direct link to What is Metatype?" href="/blog#what-is-metatype">​</a></h2>
<p>Metatype is an open source platform to author and deploy APIs for the cloud and components eras. It provides a declarative programming model that helps you to efficiently design APIs and focus on the functional requirements.</p>
<p>The runtime embraces WebAssembly (WASM) as a first-class citizen to allow you to write your business logic in the language of your choice and run it on-demand. Those &quot;backend components&quot; are reusable across your stacks and deployable without pipelines or containers.</p>
<p>The platform provides a set of capabilities out of the box:</p>
<ul>
<li>create/read/update/delete data in your database</li>
<li>storing files in your cloud storage</li>
<li>authenticate users with different providers or using JWTs</li>
<li>connecting to third-party/internal APIs</li>
</ul>
<p>And offers an opportunity to climb the one step higher in the abstraction ladder and drastically simplify the building of great APIs and systems!</p>
<br>
<div class="mx-auto max-w-[650px]"><p><img decoding="async" loading="lazy" src="/assets/images/evolution.drawio-6260dff95a16730963b51fa7819b9386.svg" class="img_iVCH"></p></div>
<p>Metatype is designed to be as simple as possible and horizontally scalable in existing container orchestration solution like Kubernetes. It consists of multiple parts, including:</p>
<ul>
<li><a href="/docs/reference/typegraph"><strong>Typegraph</strong></a>: a cross-language SDK to manage typegraphs - virtual graphs of types - and compose them</li>
<li><a href="/docs/reference/typegate"><strong>Typegate</strong></a>: a serverless GraphQL/REST gateway to execute queries over typegraphs</li>
<li><a href="/docs/reference/meta-cli"><strong>Meta CLI</strong></a>: a command-line tool to efficiently deploy the typegraphs on the gateway</li>
</ul>
<div class="mx-auto max-w-[400px]"><p><img decoding="async" loading="lazy" src="/assets/images/components.drawio-564f2cdd1b75f6132ff8fdfaad29a92c.svg" class="img_iVCH"></p></div>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="what-are-virtual-graphs">What are virtual graphs?<a class="hash-link" aria-label="Direct link to What are virtual graphs?" title="Direct link to What are virtual graphs?" href="/blog#what-are-virtual-graphs">​</a></h2>
<p>Typegraphs are a declarative way to expose all APIs, storage and business logic of your stack as a single graph. They take inspiration from domain-driven design principles and in the idea that the relation between of the data is as important as data itself, even though they might be in different locations or shapes.</p>
<div>Loading...</div>
<p>These elements can then be combined and composed together similarly on how you would compose web components to create an interface in modern frontend practices. This allows developers to build modular and strongly typed APIs using typegraph as a programmable glue.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="where-does-this-belong-in-the-tech-landscape">Where does this belong in the tech landscape?<a class="hash-link" aria-label="Direct link to Where does this belong in the tech landscape?" title="Direct link to Where does this belong in the tech landscape?" href="/blog#where-does-this-belong-in-the-tech-landscape">​</a></h2>
<p>Before Metatype, there was a gap in the technological landscape for a solution that specifically addressed the transactional, short-lived use cases. While there were existing tools for analytical or long-running use cases, such as Trino and Temporal, there was no generic engine for handling transactional, short-lived tasks.</p>
<div class="flex justify-center mt-8 overflow-auto"><table class="table-fixed text-center" id="landscape"><tbody><tr class="border-none"><td class="border-none"></td><td><small>← individual entities</small><br>transactional</td><td><small>large data →</small><br>analytical</td></tr><tr><td><small>instantaneous ↑</small><br>short-lived</td><td class="bg-slate-100"><strong>Metatype</strong><br><small>composition engine for entities in evolving systems</small></td><td>Trino<br><small>query engine for large data from multiples sources</small></td></tr><tr><td>long-running<br><small>asynchronous ↓</small></td><td>Temporal<br><small>workflow orchestration for long-running operations</small></td><td>Spark<br><small>batch/streaming engine for large data processing</small></td></tr></tbody></table></div>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="give-it-a-try">Give it a try!<a class="hash-link" aria-label="Direct link to Give it a try!" title="Direct link to Give it a try!" href="/blog#give-it-a-try">​</a></h2>
<p>Let us know what you think! Metatype is open source and we welcome any feedback or contributions. The community primarily lives on <a href="https://github.com/metatypedev/metatype" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>
<div class="theme-admonition theme-admonition-info admonition_YYWW alert alert--info"><div class="admonitionHeading_vFJj"><span class="admonitionIcon_OgGg"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Next steps</div><div class="admonitionContent_rC2G"><p><a href="/docs/tutorials/metatype-basics">Build your first typegraph</a> or read more about the <a href="/docs/concepts/mental-model">concepts behind Metatype</a>.</p></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_vgDZ"><a href="/blog/2023/03/15/emulating-servers">Emulating your server nodes locally</a></h2><div class="container_h3HB margin-vert--md"><time datetime="2023-03-15T00:00:00.000Z">March 15, 2023</time> · <!-- -->4 min read</div></header><div class="markdown"><div class="bg-gray-40 border-l-4 border-blue-500 p-4 my-4"><p class="text-lg font-light">Metatype is a platform which allows developers to solely focus on functional aspect of their applications by powering them with rich declarative API development tools to program and deploy in a cloud first environment. One component of Metatype is the Typegate, a serverless GraphQL/REST gateway for processing queries. This post is about how we in metatype made a dev friendly access to a typegate instance namely Embedded Typegate.</p></div>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="introducing-the-embedded-typegate">Introducing the Embedded Typegate<a class="hash-link" aria-label="Direct link to Introducing the Embedded Typegate" title="Direct link to Introducing the Embedded Typegate" href="/blog#introducing-the-embedded-typegate">​</a></h2>
<p>The embedded typegate is a feature that comes with the <a href="/docs/reference/meta-cli">Meta CLI</a> which provides the option of spinning a typegate instance from the CLI with minimum configurations and installations needed from the developer. All that is required to access the <em>Embedded Typegate</em> is to install <em>Meta CLI</em>. The spawned typegate instance behaves similarly to cloud-deployed typegates.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="the-motive">The motive<a class="hash-link" aria-label="Direct link to The motive" title="Direct link to The motive" href="/blog#the-motive">​</a></h2>
<p>There are more than a couple of reasons why a developer would be tempted to use an emedded typegate. While developers can start a typegate instance using docker compose, the developer needs to install docker as a dependency to run the typegate container. Even though docker is familiar among many developers, it can sometimes be tricky and unbeknownst to some developers. We at metatype highly value the developer experience and one reason for adding the <em>embedded typegate</em> feature to the <em>Meta CLI</em> is for users to have a smooth experience with our system by providing a docker compose free experience.
This feature provides a great utility for developers to author and test typegraphs in their local machine before deploying them to production level typegate instances on the cloud.
Additionally, developers need not concern themselves with deployment configurations which are needed only during deployment. The only need to focus their energy and time in developing the right application and easily test them on <em>embedded typegate</em> running from the terminal. To add more to what is said, as the typegate engine keeps evolving, users will be abstracted away from the different configurations which might be added on the future. The <em>Meta CLI</em> will abstract much of what&#x27;s not needed in a dev environment. Thus, leaving less headaches to developers on new changes.
Ultimately, The <em>embedded typegate</em> is designed to be a good dev environment friendly tool which faciliates development time.</p>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="quick-first-hand-example">Quick First hand example<a class="hash-link" aria-label="Direct link to Quick First hand example" title="Direct link to Quick First hand example" href="/blog#quick-first-hand-example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gmPS" id="install-the-v03x-series">Install the v0.3.x series<a class="hash-link" aria-label="Direct link to Install the v0.3.x series" title="Direct link to Install the v0.3.x series" href="/blog#install-the-v03x-series">​</a></h3>
<p>Either of the two <a href="/docs/reference/typegraph">Typegraph</a> SDKs are needed to author typegraphs. For this example, the node SDK will be used.</p>
<p>First, make sure the <em>Meta CLI</em> is installed.</p>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">curl -fsSL https://raw.githubusercontent.com/metatypedev/metatype/main/installer.sh | bash</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, create a new node project using this command.</p>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">meta new --template node</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The above command will create a sample typegraph which you can use to test the embedded typegate.</p>
<p>Now, you need to install the typegraph SDK by running the command down below. The previous command generates a <code>package.json</code> with the SDK specified as a dependency.</p>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Before deploying the typegraph to the embedded typegate, Run the following commands below.</p>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">meta dev</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now that there is running instance of a typegate, you can deploy the example typegraph. From another terminal, run the command below.</p>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">meta deploy -f api/example.ts --allow-dirty --create-migration --target dev --gate http://localhost:7890</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The typegate runs on port 7890 by default. If you access <a href="http://localhost:7890/example" target="_blank" rel="noopener noreferrer">http://localhost:7890/example</a> on your browser, you can see an GraphQL interface to interact with the deployed typegraph. You can test the example typegraph using the following graphql query below.</p>
<div class="language-graphql codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-graphql codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">multilpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">second</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1></h1>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="upgrade-your-metatype-development-environment">Upgrade your Metatype development environment<a class="hash-link" aria-label="Direct link to Upgrade your Metatype development environment" title="Direct link to Upgrade your Metatype development environment" href="/blog#upgrade-your-metatype-development-environment">​</a></h2>
<p>To Upgrade the <em>Meta CLI</em> to the latest version, you can run the following command below.</p>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">meta upgrade</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul class="pl-0 m-0 list-none text-sm"><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" checked="" value="typescript"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Typescript SDK</div></label></div></li><li class="inline-block rounded-md overflow-clip my-2 mr-2"><div><label class="cursor-pointer"><input type="radio" class="hidden peer" value="python"><div class="px-3 py-1 bg-slate-100 peer-checked:bg-metared peer-checked:text-white">Python SDK</div></label></div></li></ul><div role="tabpanel" class="tabItem_iUri"><p>To upgrade the <em>Typescript</em> SDK of the typegraph package, you can use one of the following commands:</p>
<ul>
<li>Node</li>
</ul>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">npm update @typegraph/sdk</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Deno</li>
</ul>
<div class="language-shell codeBlockContainer_yjWX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uZxP"><pre tabindex="0" class="prism-code language-shell codeBlock_Af8L thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YPc1"><span class="token-line" style="color:#393A34"><span class="token plain">deno cache --reload &quot;npm:@typegraph/sdk&quot;</span><br></span></code></pre><div class="buttonGroup_oEkQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_P8GA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t89q"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x1PT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_gmPS" id="learn-more-about-metatype">Learn more about Metatype<a class="hash-link" aria-label="Direct link to Learn more about Metatype" title="Direct link to Learn more about Metatype" href="/blog#learn-more-about-metatype">​</a></h2>
<p>Wanna dive deep into the basics of <em>Metaype</em>? check our interactive <a href="/docs/tutorials/metatype-basics">tutorial</a> revolving around the core features of the system.</p></div><footer class="row docusaurus-mt-lg"></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/metatype-basics">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/features-overview">Features overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts/mental-model">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference/changelog">Changelog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/metatypedev/metatype/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_oKM7"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://communityinviter.com/apps/metatypedev/invite" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_oKM7"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/metatypedev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_oKM7"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/91505656/admin/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_oKM7"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/legal/terms">Terms &amp; conditions</a></li><li class="footer__item"><a class="footer__link-item" href="/legal/privacy-policy">Privacy policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © Metatype OÜ.</div></div></div></footer></div>
</body>
</html>